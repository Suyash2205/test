<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Math Lock Breaker</title>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    font-family: Segoe UI, sans-serif;
    background: linear-gradient(135deg,#667eea,#764ba2);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
}

.game-container {
    background: white;
    padding: 30px;
    border-radius: 20px;
    width: 900px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
}

.game-header {
    display: flex;
    justify-content: space-between;
    border-bottom: 2px solid #eee;
    margin-bottom: 20px;
    padding-bottom: 15px;
}

.game-title { font-size: 32px; color: #667eea; }

.stats { display: flex; gap: 30px; }
.stat-value { font-size: 24px; font-weight: bold; }

.timer { color: #e74c3c; }

.locks-container {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(120px,1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.lock {
    aspect-ratio: 1;
    background: linear-gradient(135deg,#667eea,#764ba2);
    border-radius: 15px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    border: 3px solid #333;
}

.lock.broken {
    background: #95a5a6;
    opacity: 0.6;
    cursor: not-allowed;
}

.lock-icon { font-size: 45px; }
.lock-number { color: white; font-weight: bold; }

.question-container {
    background: #f4f6f8;
    border-radius: 15px;
    padding: 30px;
    text-align: center;
}

.question-text {
    font-size: 36px;
    font-weight: bold;
    margin-bottom: 20px;
}

.answer-input {
    font-size: 30px;
    width: 200px;
    padding: 10px;
    border-radius: 10px;
    border: 3px solid #667eea;
    text-align: center;
}

.submit-btn {
    padding: 12px 35px;
    font-size: 18px;
    background: linear-gradient(135deg,#667eea,#764ba2);
    color: white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
}

.feedback {
    font-size: 22px;
    margin-top: 15px;
    min-height: 30px;
}

.correct { color: #27ae60; }
.incorrect { color: #e74c3c; }

.hidden { display: none; }

.game-over {
    text-align: center;
    padding: 40px;
}

.game-over h2 { font-size: 48px; }
.restart-btn {
    margin-top: 25px;
    font-size: 22px;
    padding: 15px 45px;
    background: linear-gradient(135deg,#667eea,#764ba2);
    color: white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
}
</style>
</head>

<body>
<div class="game-container">

<div class="game-header">
    <h1 class="game-title">ðŸ”“ Math Lock Breaker</h1>
    <div class="stats">
        <div>Score<br><span id="score" class="stat-value">0</span></div>
        <div>Time<br><span id="timer" class="stat-value timer">50</span></div>
    </div>
</div>

<div id="game-area">
    <div class="locks-container" id="locks"></div>

    <div class="question-container">
        <div class="question-text" id="question">Select a lock</div>
        <input type="number" id="answer" class="answer-input" disabled>
        <br><br>
        <button class="submit-btn" id="submit" disabled>Submit</button>
        <div class="feedback" id="feedback"></div>
    </div>
</div>

<div id="game-over" class="game-over hidden">
    <h2 id="end-title"></h2>
    <div style="font-size:28px;margin-top:15px;">
        Final Score: <span id="final-score"></span>
    </div>
    <button class="restart-btn" onclick="location.reload()">Play Again</button>
</div>

</div>

<script>
class Game {
    constructor() {
        this.locks = [];
        this.selected = null;
        this.score = 0;
        this.time = 50;
        this.timer = null;
        this.createLocks();
        this.render();
        this.startTimer();
        this.events();
    }

    createLocks() {
        const ops = ['+','-','*','/'];
        for (let i=1;i<=6;i++) {
            let op = ops[Math.floor(Math.random()*ops.length)];
            let a,b,ans;
            if(op==='+'){a=10+Math.random()*80|0;b=10+Math.random()*80|0;ans=a+b;}
            if(op==='-'){a=40+Math.random()*80|0;b=1+Math.random()*30|0;ans=a-b;}
            if(op==='*'){a=2+Math.random()*15|0;b=2+Math.random()*10|0;ans=a*b;}
            if(op==='/'){ans=2+Math.random()*10|0;b=2+Math.random()*10|0;a=ans*b;}
            this.locks.push({id:i,q:`${a} ${op} ${b}`,a:ans,done:false});
        }
    }

    render() {
        const box=document.getElementById('locks');
        box.innerHTML='';
        this.locks.forEach(l=>{
            const d=document.createElement('div');
            d.className='lock'+(l.done?' broken':'');
            d.innerHTML=`<div class="lock-icon">${l.done?'ðŸ”“':'ðŸ”’'}</div>
                         <div class="lock-number">Lock ${l.id}</div>`;
            if(!l.done) d.onclick=()=>this.select(l);
            box.appendChild(d);
        });
    }

    select(lock){
        this.selected=lock;
        document.getElementById('question').textContent=lock.q;
        document.getElementById('answer').disabled=false;
        document.getElementById('submit').disabled=false;
        document.getElementById('answer').value='';
        document.getElementById('answer').focus();
    }

    check(){
        if(!this.selected) return;
        const v=parseInt(answer.value);
        const f=document.getElementById('feedback');
        if(v===this.selected.a){
            this.selected.done=true;
            this.score+=10;
            f.textContent='âœ“ Correct!';
            f.className='feedback correct';
            this.render();
            if(this.locks.every(l=>l.done)){
                this.finish("All Locks Broken!");
            }
        } else {
            this.score=Math.max(0,this.score-2);
            f.textContent='âœ— Wrong! -2 points';
            f.className='feedback incorrect';
        }
        score.textContent=this.score;
        answer.value='';
    }

    startTimer(){
        this.timer=setInterval(()=>{
            this.time--;
            timer.textContent=this.time;
            if(this.time<=0){
                this.finish("Time's Up!");
            }
        },1000);
    }

    finish(msg){
        clearInterval(this.timer);
        document.getElementById('game-area').classList.add('hidden');
        document.getElementById('game-over').classList.remove('hidden');
        document.getElementById('end-title').textContent=msg;
        document.getElementById('final-score').textContent=this.score;
    }

    events(){
        submit.onclick=()=>this.check();
        answer.addEventListener('keydown',e=>{
            if(e.key==='Enter') this.check();
        });
    }
}

window.onload=()=>new Game();
</script>
</body>
</html>
